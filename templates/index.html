<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>2D 开奖系统</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">
  <h1>2D</h1>
  <div class="market-area">
    {% for result in results %}
      {% set draw_time = result.draw_time.strftime('%a %d %b %Y/%H%M%p') %}
      {% set specials = result.special_numbers.split(',') %}
      {% for market in markets %}
        {% set head = result.head_number %}
        {% set odd_even = '单' if int(head) % 2 == 1 else '双' %}
        {% set big_small = '大' if int(head) >= 50 else '小' %}

        {% set text_color = 'white' if market.code in ['P','T','S','H','B','K','W'] else 'black' %}

        <div class="draw-box" id="draw-box-{{ market.code }}">
          <div class="market-header" style="background-color: {{ market.color }}; color: {{ text_color }}">
            <img src="/static/{{ market.logo }}" alt="{{ market.name }}" class="market-logo">
            <div class="market-title">
              <div><strong>{{ market.name }} 2D</strong></div>
              <div>({{ draw_time }})</div>
            </div>
          </div>

          <div class="section-title">1st Prize</div>
          <div class="result-table">
            <div class="result-box">{{ odd_even }}</div>
            <div class="result-box">{{ head }}</div>
            <div class="result-box">{{ big_small }}</div>
          </div>

          <div class="section-title">Special Prize</div>
          <div class="result-table" style="grid-template-columns: repeat(3, 1fr);">
            {% for sp in specials %}
              {% if sp != head %}
                <div class="result-box">{{ sp }}</div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      {% endfor %}
    {% endfor %}
  </div>
</div>
</body>
</html>
